<div class="modal ventana" id="ingaGeneral" tabindex="1" rol="dialog" aria-labelledby="ingaGeneral" aria-hidden="false">
  <div class="modal-dialog">
    <div class="modal-content">

      <form class="registro" [formGroup]="registroForm">
        <div class="modal-header">
          <h3>Datos de Ingresos / Gastos</h3>

          <div class="form-group campo">
            <label class="form-label">Inmueble</label>
            <select type="text" formControlName="inmuebleId">
              <option [value]="inmueble.idInmueble" *ngFor="let inmueble of selectInmueble">
                {{inmueble.refcatastral}} {{inmueble.alias}}</option>
            </select>
          </div>
        </div>
        <div class="modal-body">
          <div class="form">
            <div class="general">

              <div class="generalCampoSelecion">
                <div class="seleccion">

                  <div class="form-group campo">
                    <label class="form-label">Proveedor</label>
                    <select type="text" formControlName="clienteId">
                      <option [value]="proveedor.idCliente" *ngFor="let proveedor of selectProveedor">
                        {{proveedor.nie}} {{proveedor.nombre}} {{proveedor.apellidos}} </option>
                    </select>
                  </div>
  
                  <div class="form-group campo">
                    <label class="form-label">Tipo Concepto</label>
                    <select type="text" formControlName="tipoConceptoId">
                      <option [value]="tipo.idTipoConcepto" *ngFor="let tipo of selectTipoConcepto">
                        {{tipo.tipoEspecifico}}</option>
                    </select>
                  </div>
  
                </div>
  
                <div class="campos">
  
                  <div class="form-group campo">
                    <label class="form-label">Fecha Factura </label>
                    <input type="date" class="form-control" formControlName="fechaFactura">
                  </div>
                  <div class="form-group campo">
                    <label class="form-label">Numero Factura </label>
                    <input type="text" class="form-control" formControlName="numeroFactura">
                  </div>
                  <div class="form-group campo">
                    <label class="form-label">Concepto </label>
                    <input type="text" class="form-control" formControlName="concepto">
                  </div>
                  <div class="form-group campo">
                    <label class="form-label">Cuenta Corriente Proveedor </label>
                    <input type="text" class="form-control" formControlName="cuentaCorrienteProveedor">
                  </div>
                  <div class="form-group campo">
                    <label class="form-label">Cuenta Corriente Cliente </label>
                    <input type="text" class="form-control" formControlName="cuentaCorrienteCliente">
                  </div>
  
                </div>
              </div>

            </div>
            <button (click)="anadirDetalle()">Añadir Detalles</button>

            <!--Subformulario detalle dinamico-->
            <div class="regiDetalle">
              <div formArrayName="arrRegistroDetalle">
                <div class="regiDetalle" *ngFor="let detalle of obtenerDetalle.controls, let i = index" [formGroupName]="i">
                  <div class="form-group campo">
                    <label class="form-label">Concepto detalle</label>
                    <input type="text" class="form-control" formControlName="conceptoDetalle">
                  </div>
                  <div class="form-group campo">
                    <label class="form-label">Cantidad </label>
                    <input type="number" class="form-control" formControlName="cantidad">
                  </div>
                  <div class="form-group campo">
                    <label class="form-label">PVP </label>
                    <input type="number" class="form-control" formControlName="pv">
                  </div>
                  <div class="form-group campo">
                    <label class="form-label">descuento </label>
                    <input type="number" class="form-control" formControlName="descuento">
                  </div>
                  <div class="form-group campo">
                    <label class="form-label">Porcentaje de IVA </label>
                    <input type="number" class="form-control" formControlName="ivaPorcentaje">
                  </div>
                  <!-- <div class="campo">
                    <label for="form-label"> Base Imponible : </label>
                    <p>{{(registroForm.get('ingreso').value +
                      (registroForm.get('gasto').value))/(1+(registroForm.get('ivaPorcentaje').value/100))
                      +'€'}}</p>
                  </div>
                  <div class="campo">
                    <label for="form-label"> Imp IVA :</label>
                    <p>
                      {{
                      (registroForm.get('ingreso').value + (registroForm.get('gasto').value))
                      -((registroForm.get('ingreso').value +
                      (registroForm.get('gasto').value))/(1+(registroForm.get('ivaPorcentaje').value/100)))
                      +'
                      €'
                      }}
                    </p>
                  </div> -->
                  <div class="form-group campo">
                    <label class="form-label">Eliminar Ingreso / Gastos</label>
                    <input type="checkbox">
                  </div>
                </div>
              </div>
            </div>
            <!--Fin Subformulario detalle dinamico-->


            <!-- <div class="campo">
              <label for="form-label"> Base Imponible : </label>
              <p>{{(registroForm.get('ingreso').value +
                (registroForm.get('gasto').value))/(1+(registroForm.get('ivaPorcentaje').value/100))
                +'€'}}</p>
            </div>
            <div class="campo">
              <label for="form-label"> Imp IVA :</label>
              <p>
                {{
                (registroForm.get('ingreso').value + (registroForm.get('gasto').value))
                -((registroForm.get('ingreso').value +
                (registroForm.get('gasto').value))/(1+(registroForm.get('ivaPorcentaje').value/100)))
                +'
                €'
                }}
              </p>
            </div> -->

            <div class="form-group campoE">
              <label class="form-label">Eliminar Ingreso / Gastos</label>
              <input type="checkbox" formControlName="borrado">
            </div>
            <div class="modal-footer">
              <button type="button" data-dismiss="modal" data-backdrop="false">Close</button>
              <button data-dismiss="modal" (click)="enviar()">Save changes</button>
            </div>
          </div>
        </div>
      </form>

    </div>
  </div>